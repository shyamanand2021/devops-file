loki:
  auth_enabled: false

  common:
    replication_factor: 1
    path_prefix: /var/loki
    storage:
      s3:
        s3: s3://<REGION>/<BUCKET_NAME>
        s3forcepathstyle: false
        insecure: false

  schema_config:
    configs:
      - from: 2024-04-01
        store: tsdb
        object_store: s3
        schema: v13
        index:
          prefix: index_
          period: 24h

  storage:
    type: s3
    bucketNames:
      chunks: <BUCKET_NAME>
      ruler: <BUCKET_NAME>
      admin: <BUCKET_NAME>

  compactor:
    working_directory: /var/loki/compactor
    shared_store: s3
    retention_enabled: true
    retention_delete_delay: 2h
    retention_delete_worker_count: 150

  limits_config:
    retention_period: 720h # 30 days

deploymentMode: SingleBinary

singleBinary:
  replicas: 1
  persistence:
    enabled: true
    size: 50Gi
    storageClassName: ebs-sc

# Gateway configuration (optional, but good for simple setups)
gateway:
  enabled: true
  replicas: 1

backend:
  replicas: 0
read:
  replicas: 0
write:
  replicas: 0
# Enable simple scalable deployment mapping if needed,
# but SingleBinary is easiest for "start small"
